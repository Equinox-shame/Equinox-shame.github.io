

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="梓曰">
  <meta name="keywords" content="">
  
    <meta name="description" content="Source code: Lib&#x2F;dis.py  dis 模块通过反汇编支持CPython的 bytecode 分析。该模块作为输入的 CPython 字节码在文件 Include&#x2F;opcode.h 中定义，并由编译器和解释器使用。 CPython implementation detail: 字节码是 CPython 解释器的实现细节。不保证不会在Python版本之间添加、删除或更改字节码。不应">
<meta property="og:type" content="article">
<meta property="og:title" content="dis--- Python 字节码反汇编器">
<meta property="og:url" content="https://equinox-shame.github.io/2022/05/22/dis---%20Python%20%E5%AD%97%E8%8A%82%E7%A0%81%E5%8F%8D%E6%B1%87%E7%BC%96%E5%99%A8/index.html">
<meta property="og:site_name" content="Autumnal">
<meta property="og:description" content="Source code: Lib&#x2F;dis.py  dis 模块通过反汇编支持CPython的 bytecode 分析。该模块作为输入的 CPython 字节码在文件 Include&#x2F;opcode.h 中定义，并由编译器和解释器使用。 CPython implementation detail: 字节码是 CPython 解释器的实现细节。不保证不会在Python版本之间添加、删除或更改字节码。不应">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-05-22T15:35:29.435Z">
<meta property="article:modified_time" content="2022-05-22T15:35:52.367Z">
<meta property="article:author" content="梓曰">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>dis--- Python 字节码反汇编器 - Autumnal</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"equinox-shame.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"2aM6IUUWOeDGCZaDdRhrvLam-gzGzoHsz","app_key":"GQdXw2PjI9DScgw5QHVCZeYm","server_url":"https://2am6iuuw.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Autumnal Equinox</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="dis--- Python 字节码反汇编器"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-05-22 23:35" pubdate>
          2022年5月22日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k 字
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">dis--- Python 字节码反汇编器</h1>
            
            
              <div class="markdown-body">
                
                <p><strong>Source code:</strong> <a target="_blank" rel="noopener" href="https://github.com/python/cpython/tree/3.7/Lib/dis.py">Lib/dis.py</a></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#module-dis"><code>dis</code></a> 模块通过反汇编支持CPython的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-bytecode">bytecode</a> 分析。该模块作为输入的 CPython 字节码在文件 <code>Include/opcode.h</code> 中定义，并由编译器和解释器使用。</p>
<p><strong>CPython implementation detail:</strong> 字节码是 CPython 解释器的实现细节。不保证不会在Python版本之间添加、删除或更改字节码。不应考虑将此模块的跨 Python VM 或 Python 版本的使用。</p>
<p><em>在 3.6 版更改:</em> 每条指令使用2个字节。以前字节数因指令而异。</p>
<p>示例：给出函数 <code>myfunc()</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myfunc</span>(<span class="hljs-params">alist</span>):</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(alist)<br></code></pre></td></tr></table></figure>
<p>可以使用以下命令显示 <code>myfunc()</code> 的反汇编</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">&gt;&gt;&gt; dis.dis(myfunc)<br> <span class="hljs-number"> 2 </span>         <span class="hljs-number"> 0 </span>LOAD_GLOBAL             <span class="hljs-number"> 0 </span>(len)<br>             <span class="hljs-number"> 2 </span>LOAD_FAST               <span class="hljs-number"> 0 </span>(alist)<br>             <span class="hljs-number"> 4 </span>CALL_FUNCTION            1<br>             <span class="hljs-number"> 6 </span>RETURN_VALUE<br></code></pre></td></tr></table></figure>
<p>(“2” 是行号)。</p>
<h2 id="字节码分析">字节码分析</h2>
<p><em>3.4 新版功能.</em></p>
<p>字节码分析 API 允许将 Python 代码片段包装在 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Bytecode"><code>Bytecode</code></a> 对象中，以便轻松访问已编译代码的详细信息。</p>
<ul>
<li>
<p><em>class</em> <code>dis.``Bytecode</code>(<em>x</em>, ***, <em>first_line=None</em>, <em>current_offset=None</em>)</p>
<p>分析的字节码对应于函数、生成器、异步生成器、协程、方法、源代码字符串或代码对象（由 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#compile"><code>compile()</code></a> 返回）。这是下面列出的许多函数的便利包装，最值得注意的是 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.get_instructions"><code>get_instructions()</code></a> ，迭代于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Bytecode"><code>Bytecode</code></a> 的实例产生字节码操作 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Instruction"><code>Instruction</code></a> 的实例。如果 <em>first_line</em> 不是 <code>None</code> ，则表示应该为反汇编代码中的第一个源代码行报告的行号。否则，源行信息（如果有的话）直接来自反汇编的代码对象。如果 <em>current_offset</em> 不是 <code>None</code> ，则它指的是反汇编代码中的指令偏移量。设置它意味着 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Bytecode.dis"><code>dis()</code></a> 将针对指定的操作码显示“当前指令”标记。<em>classmethod</em> <code>from_traceback</code>(<em>tb</em>)从给定回溯构造一个 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Bytecode"><code>Bytecode</code></a> 实例，设置 <em>current_offset</em> 为异常负责的指令。<code>codeobj</code>已编译的代码对象。<code>first_line</code>代码对象的第一个源代码行（如果可用）<code>dis</code>()返回字节码操作的格式化视图（与 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.dis"><code>dis.dis()</code></a> 打印相同，但作为多行字符串返回）。<code>info</code>()返回带有关于代码对象的详细信息的格式化多行字符串，如 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.code_info"><code>code_info()</code></a> 。<em>在 3.7 版更改:</em> 现在可以处理协程和异步生成器对象。</p>
</li>
</ul>
<p>示例:</p>
<figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta">&gt;&gt;&gt;</span> <span class="python">bytecode = dis.Bytecode(myfunc)</span><br><span class="hljs-meta">&gt;&gt;&gt;</span> <span class="python"><span class="hljs-keyword">for</span> instr <span class="hljs-keyword">in</span> bytecode:</span><br><span class="hljs-meta">...</span> <span class="python">    <span class="hljs-built_in">print</span>(instr.opname)</span><br><span class="hljs-meta">...</span><br>LOAD_GLOBAL<br>LOAD_FAST<br>CALL_FUNCTION<br>RETURN_VALUE<br></code></pre></td></tr></table></figure>
<h2 id="分析函数">分析函数</h2>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#module-dis"><code>dis</code></a> 模块还定义了以下分析函数，它们将输入直接转换为所需的输出。如果只执行单个操作，它们可能很有用，因此中间分析对象没用：</p>
<ul>
<li>
<p><code>dis.code_info</code>(<em>x</em>)</p>
<p>返回格式化的多行字符串，其包含详细代码对象信息的用于被提供的函数、生成器、异步生成器、协程、方法、源代码字符串或代码对象。请注意，代码信息字符串的确切内容是高度依赖于实现的，它们可能会在Python VM或Python版本中任意更改。*3.2 新版功能.*<em>在 3.7 版更改:</em> 现在可以处理协程和异步生成器对象。</p>
</li>
<li>
<p><code>dis.show_code</code>(<em>x</em>, *, <em>file=None</em>)</p>
<p>将提供的函数、方法。源代码字符串或代码对象的详细代码对象信息打印到 <em>file</em> （如果未指定 <em>file</em> ，则为 <code>sys.stdout</code> ）。这是 <code>print(code_info(x), file= file)</code> 的便捷简写，用于在解释器提示符下进行交互式探索。*3.2 新版功能.*<em>在 3.4 版更改:</em> 添加 <em>file</em> 参数。</p>
</li>
<li>
<p><code>dis.``dis</code>(<em>x=None</em>, *, <em>file=None</em>, <em>depth=None</em>)</p>
<p>反汇编 <em>x</em> 对象。 <em>x</em> 可以表示模块、类、方法、函数、生成器、异步生成器、协程、代码对象、源代码字符串或原始字节码的字节序列。对于模块，它会反汇编所有功能。对于一个类，它反汇编所有方法（包括类和静态方法）。对于代码对象或原始字节码序列，它每字节码指令打印一行。它还递归地反汇编嵌套代码对象（推导式代码，生成器表达式和嵌套函数，以及用于构建嵌套类的代码）。在被反汇编之前，首先使用 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#compile"><code>compile()</code></a> 内置函数将字符串编译为代码对象。如果未提供任何对象，则此函数会反汇编最后一次回溯。如果提供的话，反汇编将作为文本写入提供的 <em>file</em> 参数，否则写入 <code>sys.stdout</code> 。递归的最大深度受 <em>depth</em> 限制，除非它是 <code>None</code> 。 <code>depth=0</code> 表示没有递归。<em>在 3.4 版更改:</em> 添加 <em>file</em> 参数。<em>在 3.7 版更改:</em> 实现了递归反汇编并添加了 <em>depth</em> 参数。<em>在 3.7 版更改:</em> 现在可以处理协程和异步生成器对象。</p>
</li>
<li>
<p><code>dis.distb</code>(<em>tb=None</em>, *, <em>file=None</em>)</p>
<p>如果没有传递，则使用最后一个回溯来反汇编回溯的堆栈顶部函数。 指示了导致异常的指令。如果提供的话，反汇编将作为文本写入提供的 <em>file</em> 参数，否则写入 <code>sys.stdout</code> 。<em>在 3.4 版更改:</em> 添加 <em>file</em> 参数。</p>
</li>
<li>
<p><code>dis.disassemble</code>(<em>code</em>, <em>lasti=-1</em>, *, <em>file=None</em>)</p>
</li>
<li>
<p><code>dis.disco</code>(<em>code</em>, <em>lasti=-1</em>, *, <em>file=None</em>)</p>
<p>反汇编代码对象，如果提供了 <em>lasti</em> ，则指示最后一条指令。输出分为以下几列：行号，用于每行的第一条指令当前指令，表示为 <code>--&gt;</code> ，一个标记的指令，用 <code>&gt;&gt;</code> 表示，指令的地址，操作码名称，操作参数，和括号中的参数解释。参数解释识别本地和全局变量名称、常量值、分支目标和比较运算符。如果提供的话，反汇编将作为文本写入提供的 <em>file</em> 参数，否则写入 <code>sys.stdout</code> 。<em>在 3.4 版更改:</em> 添加 <em>file</em> 参数。</p>
</li>
<li>
<p><code>dis.get_instructions</code>(<em>x</em>, *, <em>first_line=None</em>)</p>
<p>在所提供的函数、方法、源代码字符串或代码对象中的指令上返回一个迭代器。迭代器生成一系列 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Instruction"><code>Instruction</code></a> ，命名为元组，提供所提供代码中每个操作的详细信息。如果 <em>first_line</em> 不是 <code>None</code> ，则表示应该为反汇编代码中的第一个源代码行报告的行号。否则，源行信息（如果有的话）直接来自反汇编的代码对象。<em>3.4 新版功能.</em></p>
</li>
<li>
<p><code>dis.findlinestarts</code>(<em>code</em>)</p>
<p>此生成器函数使用代码对象 <em>code</em> 的 <code>co_firstlineno</code> 和 <code>co_lnotab</code> 属性来查找源代码中行开头的偏移量。它们生成为 <code>(offset, lineno)</code> <code>对。请参阅 :source:</code>objects/lnotab_notes.txt<code> ，了解 ``co_lnotab</code> 格式以及如何解码它。<em>在 3.6 版更改:</em> 行号可能会减少。 以前，他们总是在增加。</p>
</li>
<li>
<p><code>dis.findlabels</code>(<em>code</em>)</p>
<p>检测作为跳转目标的原始编译后字节码字符串 <em>code</em> 中的所有偏移量，并返回这些偏移量的列表。</p>
</li>
<li>
<p><code>dis.stack_effect</code>(<em>opcode</em>[, <em>oparg</em>])</p>
<p>使用参数 <em>oparg</em> 计算 <em>opcode</em> 的堆栈效果。<em>3.4 新版功能.</em></p>
</li>
</ul>
<h2 id="Python字节码说明">Python字节码说明</h2>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.get_instructions"><code>get_instructions()</code></a> 函数和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Bytecode"><code>Bytecode</code></a> 类提供字节码指令的详细信息的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#dis.Instruction"><code>Instruction</code></a> 实例：</p>
<ul>
<li>
<p><em>class</em> <code>dis.Instruction</code></p>
<p>字节码操作的详细信息<code>opcode</code>操作的数字代码，对应于下面列出的操作码值和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-collections">操作码集合</a> 中的字节码值。<code>opname</code>人类可读的操作名称<code>arg</code>操作的数字参数（如果有的话），否则为 <code>None</code></p>
<p><code>argval</code>已解析的 arg 值（如果已知），否则与 arg 相同<code>argrepr</code>人类可读的操作参数描述<code>offset</code>在字节码序列中启动操作索引<code>starts_line</code>行由此操作码（如果有）启动，否则为 <code>Noneis_jump_target</code>如果其他代码跳到这里，则为 <code>True</code> ，否则为 <code>False</code><em>3.4 新版功能.</em></p>
</li>
</ul>
<p>Python编译器当前生成以下字节码指令。</p>
<p><strong>一般指令</strong></p>
<ul>
<li>
<p><code>NOP</code></p>
<p>什么都不做。 用作字节码优化器的占位符。</p>
</li>
<li>
<p><code>POP_TOP</code></p>
<p>删除堆栈顶部（TOS）项。</p>
</li>
<li>
<p><code>ROT_TWO</code></p>
<p>交换两个最顶层的堆栈项。</p>
</li>
<li>
<p><code>ROT_THREE</code></p>
<p>将第二个和第三个堆栈项向上提升一个位置，顶项移动到位置三。</p>
</li>
<li>
<p><code>DUP_TOP</code></p>
<p>复制堆栈顶部的引用。<em>3.2 新版功能.</em></p>
</li>
<li>
<p><code>DUP_TOP_TWO</code></p>
<p>复制堆栈顶部的两个引用，使它们保持相同的顺序。<em>3.2 新版功能.</em></p>
</li>
</ul>
<p><strong>一元操作</strong></p>
<p>一元操作获取堆栈顶部元素，应用操作，并将结果推回堆栈。</p>
<ul>
<li>
<p><code>UNARY_POSITIVE</code></p>
<p>实现 <code>TOS = +TOS</code> 。</p>
</li>
<li>
<p><code>UNARY_NEGATIVE</code></p>
<p>实现 <code>TOS = -TOS</code> 。</p>
</li>
<li>
<p><code>UNARY_NOT</code></p>
<p>实现 <code>TOS = not TOS</code> 。</p>
</li>
<li>
<p><code>UNARY_INVERT</code></p>
<p>实现 <code>TOS = ~TOS</code> 。</p>
</li>
<li>
<p><code>GET_ITER</code></p>
<p>实现 <code>TOS = iter(TOS)</code> 。</p>
</li>
<li>
<p><code>GET_YIELD_FROM_ITER</code></p>
<p>如果 <code>TOS</code> 是一个 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-generator-iterator">generator iterator</a> 或 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-coroutine">coroutine</a> 对象则保持原样。否则实现 <code>TOS = iter(TOS)</code> 。<em>3.5 新版功能.</em></p>
</li>
</ul>
<p><strong>二元操作</strong></p>
<p>二元操作从堆栈中删除堆栈顶部（TOS）和第二个最顶层堆栈项（TOS1）。 它们执行操作，并将结果放回堆栈。</p>
<ul>
<li>
<p><code>BINARY_POWER</code></p>
<p>实现 <code>TOS = TOS1 ** TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_MULTIPLY</code></p>
<p>实现 <code>TOS = TOS1 * TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_MATRIX_MULTIPLY</code></p>
<p>实现 <code>TOS = TOS1 @ TOS</code> 。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BINARY_FLOOR_DIVIDE</code></p>
<p>实现 <code>TOS = TOS1 // TOS</code>。</p>
</li>
<li>
<p><code>BINARY_TRUE_DIVIDE</code></p>
<p>实现 <code>TOS = TOS1 / TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_MODULO</code></p>
<p>实现 <code>TOS = TOS1 % TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_ADD</code></p>
<p>实现 <code>TOS = TOS1 + TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_SUBTRACT</code></p>
<p>实现 <code>TOS = TOS1 - TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_SUBSCR</code></p>
<p>实现 <code>TOS = TOS1[TOS]</code> 。</p>
</li>
<li>
<p><code>BINARY_LSHIFT</code></p>
<p>实现 <code>TOS = TOS1 &lt;&lt; TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_RSHIFT</code></p>
<p>实现 <code>TOS = TOS1 &gt;&gt; TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_AND</code></p>
<p>实现 <code>TOS = TOS1 &amp; TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_XOR</code></p>
<p>实现 <code>TOS = TOS1 ^ TOS</code> 。</p>
</li>
<li>
<p><code>BINARY_OR</code></p>
<p>实现 <code>TOS = TOS1 | TOS</code> 。</p>
</li>
</ul>
<p><strong>就地操作</strong></p>
<p>就地操作就像二元操作，因为它们删除了TOS和TOS1，并将结果推回到堆栈上，但是当TOS1支持它时，操作就地完成，并且产生的TOS可能是（但不一定） 原来的TOS1。</p>
<ul>
<li>
<p><code>INPLACE_POWER</code></p>
<p>就地实现 <code>TOS = TOS1 ** TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_MULTIPLY</code></p>
<p>就地实现 <code>TOS = TOS1 * TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_MATRIX_MULTIPLY</code></p>
<p>就地实现 <code>TOS = TOS1 @ TOS</code> 。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>INPLACE_FLOOR_DIVIDE</code></p>
<p>就地实现 <code>TOS = TOS1 // TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_TRUE_DIVIDE</code></p>
<p>就地实现 <code>TOS = TOS1 / TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_MODULO</code></p>
<p>就地实现 <code>TOS = TOS1 % TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_ADD</code></p>
<p>就地实现 <code>TOS = TOS1 + TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_SUBTRACT</code></p>
<p>就地实现 <code>TOS = TOS1 - TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_LSHIFT</code></p>
<p>就地实现 <code>TOS = TOS1 &lt;&lt; TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_RSHIFT</code></p>
<p>就地实现 <code>TOS = TOS1 &gt;&gt; TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_AND</code></p>
<p>就地实现 <code>TOS = TOS1 &amp; TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_XOR</code></p>
<p>就地实现 <code>TOS = TOS1 ^ TOS</code> 。</p>
</li>
<li>
<p><code>INPLACE_OR</code></p>
<p>就地实现 <code>TOS = TOS1 | TOS</code> 。</p>
</li>
<li>
<p><code>STORE_SUBSCR</code></p>
<p>实现 <code>TOS1[TOS] = TOS2</code> 。</p>
</li>
<li>
<p><code>DELETE_SUBSCR</code></p>
<p>实现 <code>del TOS1[TOS]</code> 。</p>
</li>
</ul>
<p><strong>协程操作码</strong></p>
<ul>
<li>
<p><code>GET_AWAITABLE</code></p>
<p>实现 <code>TOS = get_awaitable(TOS)</code> ，其中 <code>get_awaitable(o)</code> 返回 <code>o</code> 如果 <code>o</code> 是一个有 CO_ITERABLE_COROUTINE 标志的协程对象或生成器对象，否则解析 <code>o.__await__</code> 。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>GET_AITER</code></p>
<p>实现 <code>TOS = TOS.__aiter__()</code> 。*3.5 新版功能.*<em>在 3.7 版更改:</em> 已经不再支持从 <code>__aiter__</code> 返回可等待对象。</p>
</li>
<li>
<p><code>GET_ANEXT</code></p>
<p>实现 <code>PUSH(get_awaitable(TOS.__anext__()))</code> 。参见 <code>GET_AWAITABLE</code> 获取更多 <code>get_awaitable</code> 的细节<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BEFORE_ASYNC_WITH</code></p>
<p>从栈顶元素解析 <code>__aenter__</code> 和 <code>__aexit__</code> 。将 <code>__aexit__</code> 和 <code>__aenter__()</code> 的结果推入堆栈。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>SETUP_ASYNC_WITH</code></p>
<p>创建一个新的帧对象。<em>3.5 新版功能.</em></p>
</li>
</ul>
<p><strong>其他操作码</strong></p>
<ul>
<li>
<p><code>PRINT_EXPR</code></p>
<p>实现交互模式的表达式语句。TOS从堆栈中被移除并打印。在非交互模式下，表达式语句以 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-POP_TOP"><code>POP_TOP</code></a> 终止。</p>
</li>
<li>
<p><code>BREAK_LOOP</code></p>
<p>Terminates a loop due to a <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/reference/simple_stmts.html#break"><code>break</code></a> statement.</p>
</li>
<li>
<p><code>CONTINUE_LOOP</code>(<em>target</em>)</p>
<p>Continues a loop due to a <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/reference/simple_stmts.html#continue"><code>continue</code></a> statement. <em>target</em> is the address to jump to (which should be a <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-FOR_ITER"><code>FOR_ITER</code></a> instruction).</p>
</li>
<li>
<p><code>SET_ADD</code>(<em>i</em>)</p>
<p>调用 <code>set.add(TOS1[-i], TOS)</code> 。 用于实现集合推导。</p>
</li>
<li>
<p><code>LIST_APPEND</code>(<em>i</em>)</p>
<p>调用 <code>list.append(TOS[-i], TOS)</code> 。 用于实现列表推导。</p>
</li>
<li>
<p><code>MAP_ADD</code>(<em>i</em>)</p>
<p>Calls <code>dict.setitem(TOS1[-i], TOS, TOS1)</code>. Used to implement dict comprehensions.<em>3.1 新版功能.</em></p>
</li>
</ul>
<p>对于所有 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-SET_ADD"><code>SET_ADD</code></a> 、 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-LIST_APPEND"><code>LIST_APPEND</code></a> 和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-MAP_ADD"><code>MAP_ADD</code></a> 指令，当弹出添加的值或键值对时，容器对象保留在堆栈上，以便它可用于循环的进一步迭代。</p>
<ul>
<li>
<p><code>RETURN_VALUE</code></p>
<p>返回 TOS 到函数的调用者。</p>
</li>
<li>
<p><code>YIELD_VALUE</code></p>
<p>弹出 TOS 并从一个 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-generator">generator</a> 生成它。</p>
</li>
<li>
<p><code>YIELD_FROM</code></p>
<p>弹出 TOS 并将其委托给它作为 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-generator">generator</a> 的子迭代器。<em>3.3 新版功能.</em></p>
</li>
<li>
<p><code>SETUP_ANNOTATIONS</code></p>
<p>检查 <code>__annotations__</code> 是否在 <code>locals()</code> 中定义，如果没有，它被设置为空 <code>dict</code> 。只有在类或模块体静态地包含 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-variable-annotation">variable annotations</a> 时才会发出此操作码。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>IMPORT_STAR</code></p>
<p>将所有不以 <code>'_'</code> 开头的符号直接从模块 TOS 加载到本地名称空间。加载所有名称后弹出该模块。这个操作码实现了 <code>from module import *</code> 。</p>
</li>
<li>
<p><code>POP_BLOCK</code></p>
<p>Removes one block from the block stack. Per frame, there is a stack of blocks, denoting nested loops, try statements, and such.</p>
</li>
<li>
<p><code>POP_EXCEPT</code></p>
<p>从块堆栈中删除一个块。 弹出的块必须是异常处理程序块，在进入 except 处理程序时隐式创建。除了从帧堆栈弹出无关值之外，最后三个弹出值还用于恢复异常状态。</p>
</li>
<li>
<p><code>END_FINALLY</code></p>
<p>Terminates a <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/reference/compound_stmts.html#finally"><code>finally</code></a> clause. The interpreter recalls whether the exception has to be re-raised, or whether the function returns, and continues with the outer-next block.</p>
</li>
<li>
<p><code>LOAD_BUILD_CLASS</code></p>
<p>将 <code>builtins .__ build_class__()</code> 推到堆栈上。它之后被 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-CALL_FUNCTION"><code>CALL_FUNCTION</code></a> 调用来构造一个类。</p>
</li>
<li>
<p><code>SETUP_WITH</code>(<em>delta</em>)</p>
<p>此操作码在 with 块开始之前执行几个操作。首先，它<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/reference/datamodel.html#object.__exit__"><code>__exit__()</code></a>从上下文管理器中加载并将其推送到堆栈以供<code>WITH_CLEANUP</code>. 然后， 被调用，并 推送<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/reference/datamodel.html#object.__enter__"><code>__enter__()</code></a>一个指向*delta的 finally 块。*最后，调用 enter 方法的结果被压入堆栈。下一个操作码要么忽略它（<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/library/dis.html#opcode-POP_TOP"><code>POP_TOP</code></a>），要么将它存储在（a）变量（<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/library/dis.html#opcode-STORE_FAST"><code>STORE_FAST</code></a>、<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/library/dis.html#opcode-STORE_NAME"><code>STORE_NAME</code></a>或 <a target="_blank" rel="noopener" href="https://docs.python.org//3.7/library/dis.html#opcode-UNPACK_SEQUENCE"><code>UNPACK_SEQUENCE</code></a>）中。<em>3.2 新版功能.</em></p>
</li>
<li>
<p><code>WITH_CLEANUP_START</code></p>
<p><a target="_blank" rel="noopener" href="https://docs.python.org//3.7/reference/compound_stmts.html#with"><code>with</code></a>当语句块退出时清理堆栈。TOS 是上下文管理器的<a target="_blank" rel="noopener" href="https://docs.python.org//3.7/reference/datamodel.html#object.__exit__"><code>__exit__()</code></a>绑定方法。TOS 下面是 1-3 个值，指示如何/为什么输入 finally 子句：</p>
<p>SECOND = <code>None</code></p>
<p>(SECOND, THIRD) = (<code>WHY_&#123;RETURN,CONTINUE&#125;</code>), retval</p>
<p>SECOND = <code>WHY_*</code>; no retval below it</p>
<p>(SECOND, THIRD, FOURTH) = exc_info()</p>
<p>In the last case, <code>TOS(SECOND, THIRD, FOURTH)</code> is called, otherwise <code>TOS(None, None, None)</code>. 在最后一种情况下，调用，否则 。将 SECOND 和调用结果压入堆栈。<code>WITH_CLEANUP_FINISH</code></p>
</li>
<li>
<p>Pops exception type and result of ‘exit’ function call from the stack.If the stack represents an exception, <em>and</em> the function call returns a ‘true’ value, this information is “zapped” and replaced with a single <code>WHY_SILENCED</code> to prevent <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-END_FINALLY"><code>END_FINALLY</code></a> from re-raising the exception. (But non-local gotos will still be resumed.)</p>
</li>
</ul>
<p>以下所有操作码均使用其参数。</p>
<ul>
<li>
<p><code>STORE_NAME</code>(<em>namei</em>)</p>
<p>实现 <code>name = TOS</code>。 <em>namei</em> 是 <em>name</em> 在代码对象的 <code>co_names</code> 属性中的索引。 在可能的情况下，编译器会尝试使用 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-STORE_FAST"><code>STORE_FAST</code></a> 或 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-STORE_GLOBAL"><code>STORE_GLOBAL</code></a>。</p>
</li>
<li>
<p><code>DELETE_NAME</code>(<em>namei</em>)</p>
<p>实现 <code>del name</code> ，其中 <em>namei</em> 是代码对象的 <code>co_names</code> 属性的索引。</p>
</li>
<li>
<p><code>UNPACK_SEQUENCE</code>(<em>count</em>)</p>
<p>将 TOS 解包为 <em>count</em> 个单独的值，它们将按从右至左的顺序被放入堆栈。</p>
</li>
<li>
<p><code>UNPACK_EX</code>(<em>counts</em>)</p>
<p>实现使用带星号的目标进行赋值：将 TOS 中的可迭代对象解包为单独的值，其中值的总数可以小于可迭代对象中的项数：新值之一将是由所有剩余项构成的列表。<em>counts</em> 的低字节是列表值之前的值的数量，<em>counts</em> 中的高字节则是之后的值的数量。 结果值会按从右至左的顺序入栈。</p>
</li>
<li>
<p><code>STORE_ATTR</code>(<em>namei</em>)</p>
<p>实现 <code>TOS.name = TOS1</code>，其中 <em>namei</em> 是 name 在 <code>co_names</code> 中的索引号。</p>
</li>
<li>
<p><code>DELETE_ATTR</code>(<em>namei</em>)</p>
<p>实现 <code>del TOS.name</code>，使用 <em>namei</em> 作为 <code>co_names</code> 中的索引号。</p>
</li>
<li>
<p><code>STORE_GLOBAL</code>(<em>namei</em>)</p>
<p>类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-STORE_NAME"><code>STORE_NAME</code></a> 但会将 name 存储为全局变量。</p>
</li>
<li>
<p><code>DELETE_GLOBAL</code>(<em>namei</em>)</p>
<p>类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-DELETE_NAME"><code>DELETE_NAME</code></a> 但会删除一个全局变量。</p>
</li>
<li>
<p><code>LOAD_CONST</code>(<em>consti</em>)</p>
<p>将 <code>co_consts[consti]</code> 推入栈顶。</p>
</li>
<li>
<p><code>LOAD_NAME</code>(<em>namei</em>)</p>
<p>将与 <code>co_names[namei]</code> 相关联的值推入栈顶。</p>
</li>
<li>
<p><code>BUILD_TUPLE</code>(<em>count</em>)</p>
<p>创建一个使用了来自栈的 <em>count</em> 个项的元组，并将结果元组推入栈顶。</p>
</li>
<li>
<p><code>BUILD_LIST</code>(<em>count</em>)</p>
<p>类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE"><code>BUILD_TUPLE</code></a> 但会创建一个列表。</p>
</li>
<li>
<p><code>BUILD_SET</code>(<em>count</em>)</p>
<p>类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE"><code>BUILD_TUPLE</code></a> 但会创建一个集合。</p>
</li>
<li>
<p><code>BUILD_MAP</code>(<em>count</em>)</p>
<p>将一个新字典对象推入栈顶。 弹出 <code>2 * count</code> 项使得字典包含 <em>count</em> 个条目: <code>&#123;..., TOS3: TOS2, TOS1: TOS&#125;</code>。<em>在 3.5 版更改:</em> 字典是根据栈中的项创建而不是创建一个预设大小包含 <em>count</em> 项的空字典。</p>
</li>
<li>
<p><code>BUILD_CONST_KEY_MAP</code>(<em>count</em>)</p>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_MAP"><code>BUILD_MAP</code></a> 版本专用于常量键。 弹出的栈顶元素包含一个由键构成的元组，然后从 <code>TOS1</code> 开始从构建字典的值中弹出 <em>count</em> 个值。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_STRING</code>(<em>count</em>)</p>
<p>拼接 <em>count</em> 个来自栈的字符串并将结果字符串推入栈顶。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_TUPLE_UNPACK</code>(<em>count</em>)</p>
<p>从栈中弹出 <em>count</em> 个可迭代对象，将它们合并为单个元组，并将结果推入栈顶。 实现可迭代对象解包为元组形式 <code>(*x, *y, *z)</code>。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_TUPLE_UNPACK_WITH_CALL</code>(<em>count</em>)</p>
<p>这类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE_UNPACK"><code>BUILD_TUPLE_UNPACK</code></a> 但专用于 <code>f(*x, *y, *z)</code> 调用语法。 栈中 <code>count + 1</code> 位置上的项应当是相应的可调用对象 <code>f</code>。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_LIST_UNPACK</code>(<em>count</em>)</p>
<p>这类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE_UNPACK"><code>BUILD_TUPLE_UNPACK</code></a> 但会将一个列表而非元组推入栈顶。 实现可迭代对象解包为列表形式 <code>[*x, *y, *z]</code>。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_SET_UNPACK</code>(<em>count</em>)</p>
<p>这类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE_UNPACK"><code>BUILD_TUPLE_UNPACK</code></a> 但会将一个集合而非元组推入栈顶。 实现可迭代对象解包为集合形式 <code>&#123;*x, *y, *z&#125;</code>。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_MAP_UNPACK</code>(<em>count</em>)</p>
<p>从栈中弹出 <em>count</em> 个映射对象，将它们合并为单个字典，并将结果推入栈顶。 实现字典解包为字典形式 <code>&#123;**x, **y, **z&#125;</code>。<em>3.5 新版功能.</em></p>
</li>
<li>
<p><code>BUILD_MAP_UNPACK_WITH_CALL</code>(<em>count</em>)</p>
<p>这类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_MAP_UNPACK"><code>BUILD_MAP_UNPACK</code></a> 但专用于 <code>f(**x, **y, **z)</code> 调用语法。 栈中 <code>count + 2</code> 位置上的项应当是相应的可调用对象 <code>f</code>。*3.5 新版功能.*<em>在 3.6 版更改:</em> 可迭代对象的位置的确定方式是将操作码参数加 2 而不是将其编码到参数的第二个字节。</p>
</li>
<li>
<p><code>LOAD_ATTR</code>(<em>namei</em>)</p>
<p>将 TOS 替换为 <code>getattr(TOS, co_names[namei])</code>。</p>
</li>
<li>
<p><code>COMPARE_OP</code>(<em>opname</em>)</p>
<p>执行布尔运算操作。 操作名称可在 <code>cmp_op[opname]</code> 中找到。</p>
</li>
<li>
<p><code>IMPORT_NAME</code>(<em>namei</em>)</p>
<p>导入模块 <code>co_names[namei]</code>。 会弹出 TOS 和 TOS1 以提供 <em>fromlist</em> 和 <em>level</em> 参数给 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#__import__"><code>__import__()</code></a>。 模块对象会被推入栈顶。 当前命名空间不受影响：对于一条标准 import 语句，会执行后续的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-STORE_FAST"><code>STORE_FAST</code></a> 指令来修改命名空间。</p>
</li>
<li>
<p><code>IMPORT_FROM</code>(<em>namei</em>)</p>
<p>从在 TOS 内找到的模块中加载属性 <code>co_names[namei]</code>。 结果对象会被推入栈顶，以便由后续的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-STORE_FAST"><code>STORE_FAST</code></a> 指令来保存。</p>
</li>
<li>
<p><code>JUMP_FORWARD</code>(<em>delta</em>)</p>
<p>将字节码计数器的值增加 <em>delta</em>。</p>
</li>
<li>
<p><code>POP_JUMP_IF_TRUE</code>(<em>target</em>)</p>
<p>如果 TOS 为真值，则将字节码计数器的值设为 <em>target</em>。 TOS 会被弹出。<em>3.1 新版功能.</em></p>
</li>
<li>
<p><code>POP_JUMP_IF_FALSE</code>(<em>target</em>)</p>
<p>如果 TOS 为假值，则将字节码计数器的值设为 <em>target</em>。 TOS 会被弹出。<em>3.1 新版功能.</em></p>
</li>
<li>
<p><code>JUMP_IF_TRUE_OR_POP</code>(<em>target</em>)</p>
<p>如果 TOS 为真值，则将字节码计数器的值设为 <em>target</em> 并将 TOS 留在栈顶。 否则（如 TOS 为假值），TOS 会被弹出。<em>3.1 新版功能.</em></p>
</li>
<li>
<p><code>JUMP_IF_FALSE_OR_POP</code>(<em>target</em>)</p>
<p>如果 TOS 为假值，则将字节码计数器的值设为 <em>target</em> 并将 TOS 留在栈顶。 否则（如 TOS 为真值），TOS 会被弹出。<em>3.1 新版功能.</em></p>
</li>
<li>
<p><code>JUMP_ABSOLUTE</code>(<em>target</em>)</p>
<p>将字节码计数器的值设为 <em>target</em>。</p>
</li>
<li>
<p><code>FOR_ITER</code>(<em>delta</em>)</p>
<p>TOS 是一个 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-iterator">iterator</a>。 可调用它的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/stdtypes.html#iterator.__next__"><code>__next__()</code></a> 方法。 如果产生了一个新值，则将其推入栈顶（将迭代器留在其下方）。 如果迭代器提示已耗尽则 TOS 会被弹出，并将字节码计数器的值增加 <em>delta</em>。</p>
</li>
<li>
<p><code>LOAD_GLOBAL</code>(<em>namei</em>)</p>
<p>加载名称为 <code>co_names[namei]</code> 的全局对象推入栈顶。</p>
</li>
<li>
<p><code>SETUP_LOOP</code>(<em>delta</em>)</p>
<p>将循环的块推送到块堆栈上。该块跨越当前指令，大小为<em>delta</em>字节。</p>
</li>
<li>
<p><code>SETUP_EXCEPT</code>(<em>delta</em>)</p>
<p>将 try 块从 try-except 子句推送到块堆栈上。<em>delta</em> 指向第一个 except 块。</p>
</li>
<li>
<p><code>SETUP_FINALLY</code>(<em>delta</em>)</p>
<p>将 try 块从 try-except 子句推送到块堆栈上。<em>delta</em> 指向 finally 块。</p>
</li>
<li>
<p><code>LOAD_FAST</code>(<em>var_num</em>)</p>
<p>将指向局部对象 <code>co_varnames[var_num]</code> 的引用推入栈顶。</p>
</li>
<li>
<p><code>STORE_FAST</code>(<em>var_num</em>)</p>
<p>将 TOS 存放到局部变量 <code>co_varnames[var_num]</code>。</p>
</li>
<li>
<p><code>DELETE_FAST</code>(<em>var_num</em>)</p>
<p>移除局部对象 <code>co_varnames[var_num]</code>。</p>
</li>
<li>
<p><code>LOAD_CLOSURE</code>(<em>i</em>)</p>
<p>将一个包含在单元的第 <em>i</em> 个空位中的对单元的引用推入栈顶并释放可用的存储空间。 如果 <em>i</em> 小于 <em>co_cellvars</em> 的长度则变量的名称为 <code>co_cellvars[i]</code>。 否则为 <code>co_freevars[i - len(co_cellvars)]</code>。</p>
</li>
<li>
<p><code>LOAD_DEREF</code>(<em>i</em>)</p>
<p>加载包含在单元的第 <em>i</em> 个空位中的单元并释放可用的存储空间。 将一个对单元所包含对象的引用推入栈顶。</p>
</li>
<li>
<p><code>LOAD_CLASSDEREF</code>(<em>i</em>)</p>
<p>类似于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-LOAD_DEREF"><code>LOAD_DEREF</code></a> 但在查询单元之前会首先检查局部对象字典。 这被用于加载类语句体中的自由变量。<em>3.4 新版功能.</em></p>
</li>
<li>
<p><code>STORE_DEREF</code>(<em>i</em>)</p>
<p>将 TOS 存放到包含在单元的第 <em>i</em> 个空位中的单元内并释放可用存储空间。</p>
</li>
<li>
<p><code>DELETE_DEREF</code>(<em>i</em>)</p>
<p>清空包含在单元的第 <em>i</em> 个空位中的单元并释放可用存储空间。 被用于 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/reference/simple_stmts.html#del"><code>del</code></a> 语句。<em>3.2 新版功能.</em></p>
</li>
<li>
<p><code>RAISE_VARARGS</code>(<em>argc</em>)</p>
<p>使用 <code>raise</code> 语句的 3 种形式之一引发异常，具体形式取决于 <em>argc</em> 的值：0: <code>raise</code> (重新引发之前的异常)1: <code>raise TOS</code> (在 <code>TOS</code> 上引发异常实例或类型)2: <code>raise TOS1 from TOS</code> (在 <code>TOS1</code> 上引发异常实例或类型并将 <code>__cause__</code> 设为 <code>TOS</code>)</p>
</li>
<li>
<p><code>CALL_FUNCTION</code>(<em>argc</em>)</p>
<p>调用一个可调用对象并传入位置参数。 <em>argc</em> 指明位置参数的数量。 栈顶包含位置参数，其中最右边的参数在最顶端。 在参数之下是一个待调用的可调用对象。 <code>CALL_FUNCTION</code> 会从栈中弹出所有参数以及可调用对象，附带这些参数调用该可调用对象，并将可调用对象所返回的返回值推入栈顶。<em>在 3.6 版更改:</em> 此操作码仅用于附带位置参数的调用。</p>
</li>
<li>
<p><code>CALL_FUNCTION_KW</code>(<em>argc</em>)</p>
<p>调用一个可调用对象并传入位置参数（如果有的话）和关键字参数。 <em>argc</em> 指明位置参数和关键字参数的总数量。 栈顶元素包含一个关键字参数名称的元组。 在元组之下是根据元组排序的关键字参数。 在关键字参数之下是位置参数，其中最右边的参数在最顶端。 在参数之下是一个待调用的可调用对象。 <code>CALL_FUNCTION_KW</code> 会从栈中弹出所有参数以及可调用对象，附带这些参数调用该可调用对象，并将可调用对象所返回的返回值推入栈顶。<em>在 3.6 版更改:</em> 关键字参数会被打包为一个元组而非字典，<em>argc</em> 指明参数的总数量。</p>
</li>
<li>
<p><code>CALL_FUNCTION_EX</code>(<em>flags</em>)</p>
<p>调用一个可调用对象并附带位置参数和关键字参数变量集合。 如果设置了 <em>flags</em> 的最低位，则栈顶包含一个由额外关键字参数组成的映射对象。 在该对象之下是一个包含位置参数的可迭代对象和一个待调用的可调用对象。 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_MAP_UNPACK_WITH_CALL"><code>BUILD_MAP_UNPACK_WITH_CALL</code></a> 和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-BUILD_TUPLE_UNPACK_WITH_CALL"><code>BUILD_TUPLE_UNPACK_WITH_CALL</code></a> 可用于合并多个映射对象和包含参数的可迭代对象。 在该可调用对象被调用之前，映射对象和可迭代对象会被分别“解包”并将它们的内容分别作为关键字参数和位置参数传入。 <code>CALL_FUNCTION_EX</code> 会从栈中弹出所有参数以及可调用对象，附带这些参数调用该可调用对象，并将可调用对象所返回的返回值推入栈顶。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>LOAD_METHOD</code>(<em>namei</em>)</p>
<p>从 TOS 对象加载一个名为 <code>co_names[namei]</code> 的方法。 TOS 将被弹出。 此字节码可区分两种情况：如果 TOS 有一个名称正确的方法，字节码会将未绑定方法和 TOS 推入栈顶。 TOS 将在调用未绑定方法时被用作 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-CALL_METHOD"><code>CALL_METHOD</code></a> 的第一个参数 (<code>self</code>)。 否则会将 <code>NULL</code> 和属性查找所返回的对象推入栈顶。<em>3.7 新版功能.</em></p>
</li>
<li>
<p><code>CALL_METHOD</code>(<em>argc</em>)</p>
<p>调用一个方法。 <em>argc</em> 是位置参数的数量。 关键字参数不受支持。 此操作码被设计用于配合 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-LOAD_METHOD"><code>LOAD_METHOD</code></a> 使用。 位置参数放在栈顶。 在它们之下放在栈中的是由 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/dis.html#opcode-LOAD_METHOD"><code>LOAD_METHOD</code></a> 所描述的两个条目（或者是 <code>self</code> 和一个未绑定方法对象，或者是 <code>NULL</code> 和一个任意可调用对象）。 它们会被全部弹出并将返回值推入栈顶。<em>3.7 新版功能.</em></p>
</li>
<li>
<p><code>MAKE_FUNCTION</code>(<em>flags</em>)</p>
<p>将一个新函数对象推入栈顶。 从底端到顶端，如果参数带有指定的旗标值则所使用的栈必须由这些值组成。<code>0x01</code> 是一个默认值的元组，用于按位置排序的仅限位置形参以及位置或关键字形参<code>0x02</code> 是一个仅限关键字形参的默认值的字典<code>0x04</code> 是一个标注字典<code>0x08</code> 一个包含用于自由变量的单元的元组，生成一个闭包与函数 (在 TOS1) 相关联的代码函数的 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/glossary.html#term-qualified-name">qualified name</a> (在 TOS)</p>
</li>
<li>
<p><code>BUILD_SLICE</code>(<em>argc</em>)</p>
<p>将一个切片对象推入栈顶。 <em>argc</em> 必须为 2 或 3。 如果为 2，则推入 <code>slice(TOS1, TOS)</code>；如果为 3，则推入 <code>slice(TOS2, TOS1, TOS)</code>。 请参阅 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#slice"><code>slice()</code></a> 内置函数了解详细信息。</p>
</li>
<li>
<p><code>EXTENDED_ARG</code>(<em>ext</em>)</p>
<p>为任意带有大到无法放入默认的单字节的参数的操作码添加前缀。 <em>ext</em> 存放一个附加字节作为参数中的高比特位。 对于每个操作码，最多允许三个 <code>EXTENDED_ARG</code> 前缀，构成两字节到三字节的参数。</p>
</li>
<li>
<p><code>FORMAT_VALUE</code>(<em>flags</em>)</p>
<p>用于实现格式化字面值字符串（f-字符串）。 从栈中弹出一个可选的 <em>fmt_spec</em>，然后是一个必须的 <em>value</em>。 <em>flags</em> 的解读方式如下：<code>(flags &amp; 0x03) == 0x00</code>: <em>value</em> 按原样格式化。<code>(flags &amp; 0x03) == 0x01</code>: 在格式化 <em>value</em> 之前调用其 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/stdtypes.html#str"><code>str()</code></a>。<code>(flags &amp; 0x03) == 0x02</code>: 在格式化 <em>value</em> 之前调用其 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#repr"><code>repr()</code></a>。<code>(flags &amp; 0x03) == 0x03</code>: 在格式化 <em>value</em> 之前调用其 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.7/library/functions.html#ascii"><code>ascii()</code></a>。<code>(flags &amp; 0x04) == 0x04</code>: 从栈中弹出 <em>fmt_spec</em> 并使用它，否则使用空的 <em>fmt_spec</em>。使用 <code>PyObject_Format()</code> 执行格式化。 结果会被推入栈顶。<em>3.6 新版功能.</em></p>
</li>
<li>
<p><code>HAVE_ARGUMENT</code></p>
<p>这不是一个真正的操作码。 它用于标明使用参数和不使用参数的操作码 (分别为 <code>&lt; HAVE_ARGUMENT</code> 和 <code>&gt;= HAVE_ARGUMENT</code>) 之间的分隔线。<em>在 3.6 版更改:</em> 现在每条指令都带有参数，但操作码 <code>&lt; HAVE_ARGUMENT</code> 会忽略它。 之前仅限操作码 <code>&gt;= HAVE_ARGUMENT</code> 带有参数。</p>
</li>
</ul>
<h2 id="操作码集合">操作码集合</h2>
<p>提供这些集合用于字节码指令的自动内省：</p>
<ul>
<li>
<p><code>dis.opname</code></p>
<p>操作名称序列，可使用字节码来索引。</p>
</li>
<li>
<p><code>dis.opmap</code></p>
<p>映射操作名称到字节码的字典</p>
</li>
<li>
<p><code>dis.cmp_op</code></p>
<p>所有比较操作名称的序列。</p>
</li>
<li>
<p><code>dis.hasconst</code></p>
<p>访问常量的字节码序列。</p>
</li>
<li>
<p><code>dis.hasfree</code></p>
<p>访问自由变量的字节码序列（请注意这里所说的‘自由’是指在当前作用域中被内部作用域所引用的名称，或在外部作用域中被此作用域所引用的名称。 它 <em>并不</em> 包括对全局或内置作用域的引用）。</p>
</li>
<li>
<p><code>dis.hasname</code></p>
<p>按名称访问属性的字节码序列</p>
</li>
<li>
<p><code>dis.hasjrel</code></p>
<p>具有相对跳转目标的字节码序列。</p>
</li>
<li>
<p><code>dis.hasjabs</code></p>
<p>具有绝对跳转目标的字节码序列。</p>
</li>
<li>
<p><code>dis.haslocal</code></p>
<p>访问局部变量的字节码序列。</p>
</li>
<li>
<p><code>dis.hascompare</code></p>
<p>布尔运算的字节码序列</p>
</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python/" class="category-chain-item">Python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>dis--- Python 字节码反汇编器</div>
      <div>https://equinox-shame.github.io/2022/05/22/dis--- Python 字节码反汇编器/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>梓曰</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年5月22日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/06/09/%E4%B8%AD%E5%9B%BD%E8%BF%91%E4%BB%A3%E5%8F%B2/" title="中国近代史大纲">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">中国近代史大纲</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/05/15/Linux%E6%B7%B7%E5%88%86%E7%AC%94%E8%AE%B0/" title="Linux 学习的一些总结">
                        <span class="hidden-mobile">Linux 学习的一些总结</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"2aM6IUUWOeDGCZaDdRhrvLam-gzGzoHsz","appKey":"GQdXw2PjI9DScgw5QHVCZeYm","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":"//i0.hdslb.com/bfs/emote/","emojiMaps":{"脱单doge":"bf7e00ecab02171f8461ee8cf439c73db9797748.png","热":"4e58a2a6f5f1580ac33df2d2cf7ecad7d9ab3635.png","微笑":"685612eadc33f6bc233776c6241813385844f182.png","口罩":"3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png","doge":"3087d273a78ccaff4bb1e9972e2ba2a7583c9f11.png","妙啊":"b4cb77159d58614a9b787b91b1cd22a81f383535.png","OK":"4683fd9ffc925fa6423110979d7dcac5eda297f4.png","星星眼":"63c9d1a31c0da745b61cdb35e0ecb28635675db2.png","辣眼睛":"35d62c496d1e4ea9e091243fa812866f5fecc101.png","吃瓜":"4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png","滑稽":"d15121545a99ac46774f1f4465b895fe2d1411c3.png","呲牙":"b5a5898491944a4268360f2e7a84623149672eb6.png","打call":"431432c43da3ee5aab5b0e4f8931953e649e9975.png","歪嘴":"4384050fbab0586259acdd170b510fe262f08a17.png","调皮":"8290b7308325e3179d2154327c85640af1528617.png","翻白眼":"eba54707c7168925b18f6f8b1f48d532fe08c2b1.png","灵魂出窍":"43d3db7d97343c01b47e22cfabeca84b4251f35a.png","再见":"fc510306bae26c9aec7e287cdf201ded27b065b9.png","嗑瓜子":"28a91da1685d90124cfeead74622e1ebb417c0eb.png","笑哭":"c3043ba94babf824dea03ce500d0e73763bf4f40.png","藏狐":"ba0937ef6f3ccca85e2e0047e6263f3b4da37201.png","脸红":"0922c375da40e6b69002bd89b858572f424dcfca.png","给心心":"1597302b98827463f5b75c7cac1f29ea6ce572c4.png","嘟嘟":"abd7404537d8162720ccbba9e0a8cdf75547e07a.png","哦呼":"362bded07ea5434886271d23fa25f5d85d8af06c.png","喜欢":"8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png","酸了":"92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png","嫌弃":"de4c0783aaa60ec03de0a2b90858927bfad7154b.png","大哭":"2caafee2e5db4db72104650d87810cc2c123fc86.png","害羞":"9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png","疑惑":"b7840db4b1f9f4726b7cb23c0972720c1698d661.png","喜极而泣":"485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png","奸笑":"bb84906573472f0a84cebad1e9000eb6164a6f5a.png","阴险":"ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png","囧":"12e41d357a9807cc80ef1e1ed258127fcc791424.png","呆":"33ad6000d9f9f168a0976bc60937786f239e5d8c.png","大笑":"ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png","惊喜":"0afecaf3a3499479af946f29749e1a6c285b6f65.png"},"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://equinox-shame.github.io" target="_blank" rel="nofollow noopener"><span>梓曰</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
